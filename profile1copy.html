<!DOCTYPE html>
<html>

<head>
    <link href="./img/favicon.png" rel="shortcut icon" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport" />
    <!-- Facebook -->
    <meta content="" property="og:url" />
    <meta content="website" property="og:type" />
    <!-- Twitter -->
    <meta content="photo" name="twitter:card" />
    <!-- <link href="./css/profile1-copy.css" rel="stylesheet" type="text/css" /> -->
    <meta content="AnimaApp.com - Design to code, Automated." name="author">
    </meta>
</head>

<body style="margin: 0;
 background: rgba(251, 251, 251, 1.0);">
    <input id="anPageName" name="page" type="hidden" value="profile1copy" />
    <div class="profile1copy anima-screen ">
        <div class="a1-7KJpQb">
            <div class="anima-container-center-horizontal ">
                <div class="kyu-kisi-ko-wafa-k-u2026-tuFyKO font-class-2">
                    Kyu kisi ko wafa k …
                </div>
            </div>
            <div class="anima-container-center-horizontal ">
                <div class="excuse-me-kya-re-te-5LPVBl font-class-1">
                    Excuse me, kya re tera dil
                </div>
            </div>
            <img anima-src="./img/profile-1-copy-oval@2x.png" class="oval-6PdAgd"
                src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
        </div>
        <div class="a3-Lda0GF">
            <div class="olecon-u2019s-music-JXRINx font-class-1">
                Olecon’s Music
            </div>
            <!-- <div class="group-2-jVZ2Gg anima-flexbox-container">
                <div class="a7-TyqUPE font-class-1">
                    7
                </div>
                <img anima-src="./img/profile-1-copy-arrow@2x.png" class="arrow-4hlpN0"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
            </div> -->
            <div class="a2-xYCueR">
                <img anima-src="./img/profile-1-copy-oval-1@2x.png" class="oval-mxWEdt"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                <div class="annie-tyler-ATdikM font-class-1">
                    Annie Tyler
                </div>
                <div class="senior-design-direct-zkdfVb font-class-2">
                    Senior Design Director
                </div>
            </div>
            <div class="a2-JyeKHe">
                <img anima-src="./img/profile-1-copy-oval-1@2x.png" class="oval-nJS67W"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                <div class="annie-tyler-xXI9CK font-class-1">
                    Annie Tyler
                </div>
                <div class="senior-design-direct-OuYnxk font-class-2">
                    Senior Design Director
                </div>
            </div>
            <div style="position: static;bottom: 0;z-index: 2;">
                <div id='online-signal' style='width:640px;text-align:center'>Signal</div>
                <span><button id="download-button">Download</button></span>
                <div>
                    <div>
                    <span style="width:120px;display:inline-block">Asset Name</span>
                    <input id="asset-title-input" type="text" style="width:500px" value="Star Trek: Angel One">
                    </div>
                    <div>
                    <span style="width:120px;display:inline-block">Asset Manifest</span>
                    <input id="asset-uri-input" type="text" style="width:500px" value="static/enc_media/stream.mpd">
                    </div>
                </div>
                <span><progress id="progress-bar" value="0" max="100"></span>
                <table id="content-table" style="width:640px"></table>
            </div>

        </div>
        <div class="navigation-bar-3rBcVE">
        </div>
        <div class="anima-container-center-horizontal ">
            <div class="profile-hQ8hkS font-class-1">
                Profile
            </div>
        </div>
        <div class="back-HdT6cx anima-flexbox-container">
            <div class="group-cEWRRs anima-flexbox-container">
                <div class="group-DfEOaS anima-flexbox-container">
                    <img anima-src="./img/profile-1-copy-shape@2x.png" class="shape-SOxy9S"
                        src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                </div>
            </div>
        </div>
        <div class="settings-3akAjK anima-flexbox-container">
            <div class="group-4HwGGm">
                <img anima-src="./img/profile-1-copy-shape-1@2x.png" class="shape-KMUxya"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
                <img anima-src="./img/profile-1-copy-shape-2@2x.png" class="shape-AYgiKo"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
            </div>
        </div>

        <audio id="video" controls autoplay
            style="position: absolute;bottom: 0;left: 0;right: 0;width: 100%;background-color: #f1f3f4;"></audio>

    </div>
    <!-- Scripts -->
    <script>
        anima_isHidden = function (e) {
            if (!(e instanceof HTMLElement)) return !1;
            if (getComputedStyle(e).display == "none") return !0; else if (e.parentNode && anima_isHidden(e.parentNode)) return !0;
            return !1;
        };
        anima_loadAsyncSrcForTag = function (tag) {
            var elements = document.getElementsByTagName(tag);
            var toLoad = [];
            for (var i = 0; i < elements.length; i++) {
                var e = elements[i];
                var src = e.getAttribute("src");
                var loaded = (src != undefined && src.length > 0 && src != 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==');
                if (loaded) continue;
                var asyncSrc = e.getAttribute("anima-src");
                if (asyncSrc == undefined || asyncSrc.length == 0) continue;
                if (anima_isHidden(e)) continue;
                toLoad.push(e);
            }
            toLoad.sort(function (a, b) {
                return anima_getTop(a) - anima_getTop(b);
            });
            for (var i = 0; i < toLoad.length; i++) {
                var e = toLoad[i];
                var asyncSrc = e.getAttribute("anima-src");
                e.setAttribute("src", asyncSrc);
            }
        };
        anima_pauseHiddenVideos = function (tag) {
            var elements = document.getElementsByTagName("video");
            for (var i = 0; i < elements.length; i++) {
                var e = elements[i];
                var isPlaying = !!(e.currentTime > 0 && !e.paused && !e.ended && e.readyState > 2);
                var isHidden = anima_isHidden(e);
                if (!isPlaying && !isHidden && e.getAttribute("autoplay") == "autoplay") {
                    e.play();
                } else if (isPlaying && isHidden) {
                    e.pause();
                }
            }
        };
        anima_loadAsyncSrc = function (tag) {
            anima_loadAsyncSrcForTag("img");
            anima_loadAsyncSrcForTag("iframe");
            anima_loadAsyncSrcForTag("video");
            anima_pauseHiddenVideos();
        };
        var anima_getTop = function (e) {
            var top = 0;
            do {
                top += e.offsetTop || 0;
                e = e.offsetParent;
            } while (e);
            return top;
        };
        anima_loadAsyncSrc();
        anima_old_onResize = window.onresize;
        anima_new_onResize = undefined;
        anima_updateOnResize = function () {
            if (anima_new_onResize == undefined || window.onresize != anima_new_onResize) {
                anima_new_onResize = function (x) {
                    if (anima_old_onResize != undefined) anima_old_onResize(x);
                    anima_loadAsyncSrc();
                };
                window.onresize = anima_new_onResize;
                setTimeout(function () {
                    anima_updateOnResize();
                }, 3000);
            }
        };
        anima_updateOnResize();
        setTimeout(function () {
            anima_loadAsyncSrc();
        }, 200);
    </script>
    <!-- End of Scripts -->

    <script src="js/shaka-player.compiled.js"></script>
    <script>
        var manifestUri =
            'static/enc_media/stream.mpd';

        function initApp() {
            // Install built-in polyfills to patch browser incompatibilities.
            shaka.polyfill.installAll();

            // Check to see if the browser supports the basic APIs Shaka needs.
            if (shaka.Player.isBrowserSupported()) {
                // Everything looks good!
                initPlayer();
            } else {
                // This browser does not have the minimum set of APIs we need.
                console.error('Browser not supported!');
            }
            // Update the online status and add listeners so that we can visualize
            // our network state to the user.
            updateOnlineStatus();
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
        }

        function initPlayer() {



            // Create a Player instance.
            var video = document.getElementById('video');
            var player = new shaka.Player(video);

            // Attach player and storage to the window to make it easy to access
            // in the JS console and so we can access it in other methods.
            window.player = player;

            player.configure({
                drm: {
                    clearKeys: {
                        "abba85a5ddab79b2a50b9555a6006241": "ae638dc8e639099aa6eb346783c7d87a",
                    }
                }
            });
            // Listen for error events.
            player.addEventListener('error', onErrorEvent);

            initStorage(player);

            var downloadButton = document.getElementById('download-button');
            downloadButton.onclick = onDownloadClick;

            // Update the content list to show what items we initially have
            // stored offline.
            refreshContentList();

            // // Try to load a manifest.
            // // This is an asynchronous process.
            player.load(manifestUri).then(function () {
                // This runs if the asynchronous load is successful.
                console.log('The video has now been loaded!');
            }).catch(onError);  // onError is executed if the asynchronous load fails.
        }

        function onErrorEvent(event) {
            // Extract the shaka.util.Error object from the event.
            onError(event.detail);
        }

        function onError(error) {
            // Log the error.
            console.error('Error code', error.code, 'object', error);
        }

        function selectTracks(tracks) {
            // This example stores the highest bandwidth variant.
            //
            // Note that this is just an example of an arbitrary algorithm, and not a best
            // practice for storing content offline.  Decide what your app needs, or keep
            // the default (user-pref-matching audio, best SD video, all text).
            var found = tracks
                .filter(function (track) { return track.type == 'variant'; })
                .sort(function (a, b) { return a.bandwidth - b.bandwidth; })
                .pop();
            console.log('Offline Track bandwidth: ' + found.bandwidth);
            return [found];
        }

        function initStorage(player) {
            // Create a storage instance and configure it with optional
            // callbacks. Set the progress callback so that we visualize
            // download progress and override the track selection callback.
            window.storage = new shaka.offline.Storage(player);
            window.storage.configure({
                offline: {
                    progressCallback: setDownloadProgress,
                    trackSelectionCallback: selectTracks,
                    usePersistentLicense: false
                }
            });
        }

        function listContent() {
            return window.storage.list();
        }

        function playContent(content) {
            console.log(content);
            window.player.load(content.offlineUri);
        }

        function removeContent(content) {
            return window.storage.remove(content.offlineUri);
        }

        function downloadContent(manifestUri, title) {
            // Construct a metadata object to be stored along side the content.
            // This can hold any information the app wants to be stored with the
            // content.
            var metadata = {
                'title': title,
                'downloaded': Date()
            };

            return window.storage.store(manifestUri, metadata);
        }

        /*
        * UI callback for when the download button is clicked. This will
        * disable the button while the download is in progress, start the
        * download, and refresh the content list once the download is
        * complete.
        */
        function onDownloadClick() {
            var downloadButton = document.getElementById('download-button');
            var manifestUri = document.getElementById('asset-uri-input').value;
            var title = document.getElementById('asset-title-input').value;

            // Disable the download button to prevent user from requesting
            // another download until this download is complete.
            downloadButton.disabled = true;

            setDownloadProgress(null, 0);

            // Download the content and then re-enable the download button so
            // that more content can be downloaded.
            downloadContent(manifestUri, title)
                .then(function () {
                    return refreshContentList();
                })
                .then(function (content) {
                    setDownloadProgress(null, 1);
                    downloadButton.disabled = false;
                })
                .catch(function (error) {
                    // In the case of an error, re-enable the download button so
                    // that the user can try to download another item.
                    downloadButton.disabled = false;
                    onError(error);
                });
        }

        /*
        * Update the online status box at the top of the page to tell the
        * user whether or not they have an internet connection.
        */
        function updateOnlineStatus() {
            var signal = document.getElementById('online-signal');
            if (navigator.onLine) {
                signal.innerHTML = 'ONLINE';
                signal.style.background = 'green';
            } else {
                signal.innerHTML = 'OFFLINE';
                signal.style.background = 'grey';
            }
        }

        /*
        * Find our progress bar and set the value to show the progress we
        * have made.
        */
        function setDownloadProgress(content, progress) {
            var progressBar = document.getElementById('progress-bar');
            progressBar.value = progress * progressBar.max;
        }

        /*
        * Clear our content table and repopulate it table with the current
        * list of downloaded content.
        */
        function refreshContentList() {
            var contentTable = document.getElementById('content-table');

            // Clear old rows from the table.
            while (contentTable.rows.length) {
                contentTable.deleteRow(0);
            }

            var addRow = function (content) {
                var append = -1;

                var row = contentTable.insertRow(append);
                row.insertCell(append).innerHTML = content.offlineUri;
                Object.keys(content.appMetadata)
                    .map(function (key) {
                        return content.appMetadata[key];
                    })
                    .forEach(function (value) {
                        row.insertCell(append).innerHTML = value;
                    });

                row.insertCell(append).appendChild(createButton(
                    'PLAY',
                    function () { playContent(content); }));

                row.insertCell(append).appendChild(createButton(
                    'REMOVE',
                    function () {
                        removeContent(content)
                            .then(function () { refreshContentList() });
                    }));
            };

            return listContent()
                .then(function (content) { content.forEach(addRow); });
        };

        /*
        * Create a new button but do not add it to the DOM. The caller
        * will need to do that.
        */
        function createButton(text, action) {
            var button = document.createElement('button');
            button.innerHTML = text;
            button.onclick = action;
            return button;
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>

</html>